;===================================================================================
;---------------- Constantes y Ataques normales--------------------------------------------
;===================================================================================

;Var List:

; - Var(7) = NO TOCAR
; - Var(8) = NO TOCAR
; - Var(9) = IA
; - Var(10) = Apariencia Transformaciones
; - Var(11) = Golpeado Transformaciones
; - Var(12) = Oscurecer Pantalla
; - Var(13) = Bombas Reset // Unguardable
; - Var(14) = Specials Transformaciones

[Data]
life = 1000
power = 1500
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 60
airjuggle = 15
sparkno = -1
guard.sparkno = -1
KO.echo = 0
volume = 0
IntPersistIndex = 60
FloatPersistIndex = 40

[Size]
xscale = .7
yscale = .7
ground.back = 25
ground.front = 25
air.back = 25
air.front = 25
height = 70
attack.dist = 160
proj.attack.dist = 90
proj.doscale = 0
head.pos = -5, -50
mid.pos = -5, -25
shadowoffset = 0
draw.offset = 0,0

[Velocity]
walk.fwd  = 2
walk.back = -2
run.fwd  = 0
run.back = 0
jump.neu = 0,-9
jump.back = -4
jump.fwd = 4
runjump.back = 0
runjump.fwd = 0
airjump.neu = 0
airjump.back = 0
airjump.fwd = 0

[Movement]
airjump.num = 0
airjump.height = 35
yaccel = .44
stand.friction = .92
crouch.friction = .63

[Quotes]
victory0 = "He venido desde el futuro solo para matarte!"
victory1 = "Tuviste las agallas de venir aqui solo para morir."
victory2 = "Eres bastante fuerte pero tenia que derrotarte."
;===============================================================================
; Perder:
;-------------------------------------------------------------------------------
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 0, Sonido]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "Sonido"
ID = 171
stateno = 171+(random%2)
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;-------------------------------------------------------------------------------
[Statedef 171]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 9999
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,36
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,36
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,36
volume = 999

[State 200, End]
type = Destroyself
trigger1 = time = 1
;-------------------------------------------------------------------------------
[Statedef 172]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 9999
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,37
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,37
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,37
volume = 999

[State 200, End]
type = Destroyself
trigger1 = time = 1
;===============================================================================
; Ganar:
;-------------------------------------------------------------------------------
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
Triggerall = roundno = 1
trigger1 = Time = 0
value = 182

[State 180, 1]
type = ChangeState
Triggerall = roundno >= 0
trigger1 = Time = 0
value = 181
;===============================================================================
; Pose Ganadora:
;-------------------------------------------------------------------------------
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

[state 181, No Life Bar]
type = assertspecial
trigger1 = Time >= 0
flag = NoBarDisplay

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 180
flag = roundnotover

[state sword asdf sound]
type = playsnd
trigger1 = !animelemtime(3)
value = s1,32

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S2,14
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S2,14
volume = 999

[State 0, Palfx]
type = Palfx
trigger1 = animelem = 4
time = 16
add = 150,150,150
mul = 240,230,190;256,256,256
sinadd = 100,100,100,22
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,34
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,34
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,34
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 8
value = S1,21
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 8
value = S1,21
volume = 999

[State random smaller aura]
type = Explod
triggerall = time < 40
triggerall = alive
trigger1 = timemod = 5,0
anim = 6020
ID = 6020
pos = 0, const(size.mid.pos.y)
vel = 0, ifelse(random<499, -.4,-.6)
random = 80,50
removetime = -2
scale = ifelse(random<499, .3, .2)*const(size.xscale), ifelse(random<499 ,.3,.2)*const(size.yscale)
sprpriority = ifelse(random<749, 3,-3)
ownpal = 1
removeongethit = 1

[State sword helper]
type = Helper
trigger1 = !animelemtime(3)
name = "Sword"
ID = 6181
stateno = 6181
pos = floor(-22*const(size.xscale)), floor(-113*const(size.yscale))
postype = p1
facing = 1
ownpal = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;-------------------------------------------------------------------------------
[Statedef 6181]
type = a
movetype = i
physics = n
anim = 6181
sprpriority = 5

[state up velocity]
type = velset
trigger1 = !time
y = -12

[state stop]
type = velset
trigger1 = pos y < -gameheight
trigger1 = vel y < 0
y = 0

[state stop]
type = posset
trigger1 = pos y < -gameheight
trigger1 = vel y = 0
x = pos x - floor(-20*const(size.xscale)*parent,facing)
y = -gameheight-57
persistent = 0

[state reset anim]
type = changeanim
trigger1 = parent, animelemtime(7) >= 0
trigger1 = vel y = 0
value = anim

[state down velocity]
type = velset
trigger1 = parent, animelemtime(7) >= 0
trigger1 = vel y = 0
y = 12

[state down anim]
type = changeanim
trigger1 = vel y > 0
value = anim
elem = 6

[state end]
type = destroyself
trigger1 = parent, animelemtime(8) >= 0
trigger2 = pos y > (-180*const(size.yscale))
trigger2 = vel y > 0
;===============================================================================
; Pose Ganadora 2:
;-------------------------------------------------------------------------------
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[state 181, No Life Bar]
type = assertspecial
trigger1 = Time >= 0
flag = NoBarDisplay

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 180
flag = roundnotover

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,21
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 14
value = S1,23
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S0,35
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S0,35
volume = 999

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 191
;===============================================================================
; Introducción:
;-------------------------------------------------------------------------------
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[state 181, No Life Bar]
type = assertspecial
trigger1 = Time >= 0
flag = NoBarDisplay

[State 190, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 0]
type = PosSet
trigger1 = time = 0
y = -400

[State 0]
type = velset
trigger1 = time = [0,90]
y = 3.5

[State 0]
type = velset
trigger1 = pos y > 0
y = 0

[State 0]
type = posset
trigger1 = pos y > 0
y = 0

[State 0, Land]
type = Explod
trigger1 = animelem = 2
anim = 7014
ID = 7014
pos = -1,1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .6,.6
sprpriority = -5
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 50
value = S1,33
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 175
value = S0,16
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 175
value = S0,16
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S0,32
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S0,32
volume = 999

[State random smaller aura]
type = Explod
triggerall = time > 170
triggerall = alive
trigger1 = timemod = 5,0
anim = 6020
ID = 6020
pos = 0, const(size.mid.pos.y)
vel = 0, ifelse(random<499, -.4,-.6)
random = 80,50
removetime = -2
scale = ifelse(random<499, .3, .2)*const(size.xscale), ifelse(random<499 ,.3,.2)*const(size.yscale)
sprpriority = ifelse(random<749, 3,-3)
ownpal = 1
removeongethit = 1

[State 0, ScreenBound]
type = ScreenBound
triggerall = time < 120
trigger1 = 1
value = 0
[State 0]
type = EnvShake
trigger1 = animelem = 2
time = 10
ampl = 2

[State 0, Palfx]
type = Palfx
trigger1 = animelem = 4
time = 5
add = 150,150,150
mul = 240,230,190;256,256,256
sinadd = 100,100,100,22
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S2,16
volume = 999
channel = 0
[State 0, StopSnd]
type = StopSnd
trigger1 = Animelem = 7
channel = 0

[State aura]
type = Explod
trigger1 = animelem = 4
Anim = 6021
ID = 6021
pos = 5,-15
sprpriority = 3
removeongethit = 1
removetime = -1
bindtime = -1
ownpal = 1
ontop = 1
scale = .6,.65
[State aura2]
type = Explod
trigger1 = animelem = 4
Anim = 6022
ID = 6022
pos = 65,-90
sprpriority = -4
removeongethit = 1
removetime = -1
bindtime = -1
ownpal = 1
ontop = 0
scale = .5,.65
[State aura3]
type = Explod
trigger1 = animelem = 4
Anim = 6023
ID = 6023
pos = 50,-95
sprpriority = 4
removeongethit = 1
removetime = -1
bindtime = -1
ownpal = 1
ontop = 1
scale = .5,.65
[State aura4]
type = Explod
trigger1 = animelem = 4
Anim = 6024
ID = 6024
pos = 55,-100
sprpriority = 5
removeongethit = 1
removetime = -1
bindtime = -1
ownpal = 1
ontop = 1
scale = .5,.65
[State aura5]
type = Explod
trigger1 = animelem = 4
Anim = 6025
ID = 6025
pos = 30,-50
sprpriority = -5
removeongethit = 1
removetime = -1
bindtime = -1
ownpal = 1
ontop = 1
scale = .35,.35

[State 0, EnvShake]
type = EnvShake
trigger1 = Animelem = 4
time = 30

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S2,15
volume = 999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 7
id = 6021
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 7
id = 6022
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 7
id = 6023
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 7
id = 6024
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 7
id = 6025

[State 190, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;===============================================================================
[Statedef 200, Combo A1]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 200
velset = 0,0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,12
volume = 999

[State 200, Explod]
type = Explod
trigger1 = time = 2
anim = 80018
ID = 200
pos = -16,0
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4,.4
sprpriority = 3
ontop = 0
ownpal = 1
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = time = 8
x = 3
[State 0, VelSet]
type = posadd
trigger1 = animelem = 2 ;time = 0
x = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,16
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NA
guardflag = MA
animtype = light
damage = 10
pausetime = 5,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,1
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -2
air.velocity = -2,-1
Fall = 0
getpower = 0,0
envshake.time = 10

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "x"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 520

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 250
[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 350

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 201

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 310

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = command != "holdup"
triggerall = command != "holdback"
triggerall = command != "holddown"
triggerall = command != "holdfwd"
Triggerall = power >= 300
triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = ailevel > 0 && random < (ailevel * 50)
value = 400

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
;-------------------------------------------------------------------------------
[Statedef 201, Combo A2]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 201
velset = 0,0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,12
volume = 999

[State 200, Explod]
type = Explod
trigger1 = time = 2
anim = 80018
ID = 200
pos = -16,0
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4,.4
sprpriority = 3
ontop = 0
ownpal = 1
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = time = 8
x = 3
[State 0, VelSet]
type = posadd
trigger1 = animelem = 2 ;time = 0
x = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,16
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NA
guardflag = MA
animtype = light
damage = 10
pausetime = 5,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,1
guardsound = S4,1
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -2
air.velocity = -2,-1
Fall = 0
getpower = 0,0
envshake.time = 10

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "x"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 520

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 250
[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 350

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 210

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 310

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = command != "holdup"
triggerall = command != "holdback"
triggerall = command != "holddown"
triggerall = command != "holdfwd"
Triggerall = power >= 300
triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = ailevel > 0 && random < (ailevel * 50)
value = 400

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
[Statedef 202, Combo A3]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 202
velset = 0,0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,12
volume = 999

[State 200, Explod]
type = Explod
trigger1 = time = 2
anim = 80018
ID = 200
pos = -16,0
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4,.4
sprpriority = 3
ontop = 0
ownpal = 1
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = time = 2
x = 8
[State 0, VelSet]
type = posadd
trigger1 = animelem = 2 ;time = 0
x = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,16
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NA
guardflag = MA
animtype = light
damage = 10
pausetime = 5,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,1
guardsound = S4,1
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -2
air.velocity = -2,-1
Fall = 0
getpower = 0,0
envshake.time = 10

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "x"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 520

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 250
[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 350

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 203

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 310

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = command != "holdup"
triggerall = command != "holdback"
triggerall = command != "holddown"
triggerall = command != "holdfwd"
Triggerall = power >= 300
triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = ailevel > 0 && random < (ailevel * 50)
value = 400

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
[Statedef 203, Combo A5]
type    = C
movetype= A
physics = S
ctrl = 0
anim = 204
velset = 0,0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,12
volume = 999

[State 200, Explod]
type = Explod
trigger1 = time = 2
anim = 80018
ID = 200
pos = -16,0
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4,.4
sprpriority = 3
ontop = 0
ownpal = 1
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = time = [9,12]
x = 8
[State 0, VelSet]
type = posadd
trigger1 = animelem = 2 ;time = 0
x = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,16
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NA
guardflag = C
animtype = light
damage = 10
pausetime = 7,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,23
guardsound = S4,1
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -1,-7
air.velocity = -1,-5
Fall = 1
getpower = 0,0
envshake.time = 10

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
trigger1 = numhelper(8103) = 0 && movehit = 1
helpertype = normal
name = "HitSpark"
ID = 8103
stateno = 8103
pos = 70,-30;0, -25
postype = p1
facing = 1
ownpal = 1
supermove=9999
pausemove=9999
size.xscale = .6
size.yscale = .6
ignorehitpause=1

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "x"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 520

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 250
[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 350

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 220

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 310

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = command != "holdup"
triggerall = command != "holdback"
triggerall = command != "holddown"
triggerall = command != "holdfwd"
Triggerall = power >= 300
triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = ailevel > 0 && random < (ailevel * 50)
value = 400

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
; A-2 :
;-------------------------------------------------------------------------------
[Statedef 210, Combo A4]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 210
velset = 0,0
sprpriority = 0

[State 200, Explod]
type = Explod
trigger1 = time = 2
anim = 80018
ID = 200
pos = -16,0
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4,.4
sprpriority = 3
ontop = 0
ownpal = 1
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = time = 8
x = 9
[State 0, VelSet]
type = posadd
trigger1 = animelem = 2 ;time = 0
x = 6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,13
volume = 999

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,16
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NA
guardflag = MA
animtype = hard
damage = 20
pausetime = 6,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,1
guardsound = S4,1
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -2
air.velocity = -2,-1
Fall = 0
getpower = 0,0
envshake.time = 10

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
triggerall = command = "holdfwd"
trigger1 = ailevel = 0 && command = "x"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 840

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movehit
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 202

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movehit
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 320

[State 200, Combo + Combo IA]
type = ChangeState
Triggerall = power >= 200
triggerall = movecontact
triggerall = command = "holdfwd"
trigger1 = ailevel = 0 && command = "c"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 490

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "c"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 450

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = command != "holdup"
triggerall = command != "holdback"
triggerall = command != "holddown"
triggerall = command != "holdfwd"
Triggerall = power >= 300
triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = ailevel > 0 && random < (ailevel * 50)
value = 400

[State 200, Combo + Combo IA]
type = ChangeState
Triggerall = power >= 500
triggerall = movecontact
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "z"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 430

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
; A-3 :
;-------------------------------------------------------------------------------
[Statedef 220, Combo A6]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 220
poweradd = 100
velset = 0,0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,4
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,16
volume = 50

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 2
statetype = A
movetype = A
physics = A

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 7
y = -7

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NA
guardflag = MA
animtype = heavy
damage = 20
pausetime = 6,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,2
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -4,-9.5
air.velocity = -4,-8.5
Fall = 1
Fall.recover = 1
Fall.recovertime = 40
getpower = 0,0
envshake.time = 15


[State 0, AfterImage]
type = AfterImage
trigger1 = time = 2
time = 32
length = 10
palbright = 0,0,0
palcontrast = 100,100,100
paladd = 0,0,0
palmul = .90, .90, .90
timegap = 1
framegap = 1
trans = add
ignorehitpause = 1
persistent = 1

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = time >= 18
triggerall = movehit
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 230

[State 200, Combo + Combo IA]
type = ChangeState
Triggerall = power >= 300
triggerall = time >= 18
triggerall = pos y < -70
triggerall = movecontact
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "c"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 480

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = time >= 18
triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 610

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = time >= 18
triggerall = pos y < -70
triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 620

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;===============================================================================
; A-4 :
;-------------------------------------------------------------------------------
; Start
[Statedef 230, Combo A7]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 230
poweradd = 200
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,8
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,8
volume = 999

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time > 10
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,16
volume = 50

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 8
y = -4

[State 0, VelSet]
type = VelSet
trigger1 = movecontact = 1
x = -1
y = -4

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = A,SA
guardflag = MA
animtype = high
damage = 30
pausetime = 12,12
sparkno = -1
guard.sparkno = S7010
hitsound = S1,2
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -6,-8
air.velocity = -6,-8
p2stateno = 425
Fall = 1
getpower = 0,0
Envshake.time = 20

[State 0, strike effect]
type = Helper
triggerall = numhelper (19991)= 0
trigger1 = movehit = 1;time = 0;animelem = 3
helpertype = normal
name = "strike effects"
ID = 19991
stateno = 19991;9993
pos = 0,-30;5,-30-random%15
postype = p2
facing = 1
ownpal = 1
ignorehitpause = 1
sprpriority = 9;5-random%5

[State 200, Run + Run IA]
type = ChangeState
triggerall = var(18) = 0
triggerall = time >= 25
trigger1 = ailevel = 0 && command = "FF"
trigger2 = ailevel > 0 && random < (ailevel * 50)
value = ifelse(pos y >= 0,60,65)
[State 200, Run + Run IA]
type = ChangeState
triggerall = var(18) = 0
triggerall = time >= 25
trigger1 = ailevel = 0 && command = "BB"
trigger2 = ailevel > 0 && random < (ailevel * 50)
value = 70

[State 200, Combo + Combo IA]
type = ChangeState
Triggerall = power >= 300
triggerall = pos y < -70
triggerall = time >= 25
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "c"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 480

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = power >= 1000
triggerall = pos y < -70
triggerall = time >= 25
trigger1 = ailevel = 0 && command = "SPECIAL 3"
trigger2 = ailevel > 0 && random < (ailevel * 10)
value = 3180

[State 0, Pause]
type = Pause
trigger1 = time = [0,5]
time = 2

[State 200, End]
type = ChangeState
trigger1 = Time = 80
trigger2 = pos Y > 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; Down A - 1
[Statedef 250]
type    = C
movetype= A
physics = C
ctrl = 0
anim = 250
poweradd = 100
velset = 0,0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,12
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,12
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,16
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NA
hitflag = MAFDE
guardflag = C
animtype = light
damage = 30
pausetime = 10,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,1
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -2
air.velocity = -2,-2
Fall = 0
getpower = 0,0
envshake.time = 10

[State 0, Hit Spark]
type = Explod
trigger1 = numexplod(7000) = 0 && movehit = 1
anim = 7000
ID = 7000
pos = 80,-65
postype = p1
scale = .6,.6
sprpriority = 2
ownpal = 1
ignorehitpause = 1


[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 300

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 200

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 12
ctrl = 1
;===============================================================================
; B:
;-------------------------------------------------------------------------------
[Statedef 300, Combo B1]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 300
poweradd = 50
velset = 0,0
sprpriority = 0

[State 200, Explod]
type = Explod
trigger1 = time = 2
anim = 80018
ID = 200
pos = -16,0
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4,.4
sprpriority = 3
ontop = 0
ownpal = 1
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = time = 8
x = 3
[State 0, VelSet]
type = posadd
trigger1 = animelem = 2 ;time = 0
x = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,2
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 7
value = S1,21
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,23
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NA
guardflag = MA
animtype = light
damage = 10
pausetime = 5,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,22
guardsound = S4,1
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -2
air.velocity = -2,-1
Fall = 0
getpower = 0,0
envshake.time = 10

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
triggerall = numhelper(8101) = 0
trigger1 = Movehit = 1
helpertype = normal
name = "HitSpark"
ID = 8101
stateno = 8101
pos = 80,-50
postype = p1
facing = 1
ownpal = 1
ignorehitpause=1

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 301

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 201

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
[Statedef 301, Combo B2]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 301
poweradd = 50
velset = 0,0
sprpriority = 0

[State 200, Explod]
type = Explod
trigger1 = time = 2
anim = 80018
ID = 200
pos = -16,0
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4,.4
sprpriority = 3
ontop = 0
ownpal = 1
ignorehitpause = 1

[State 0, Garrazo]
type = Explod
trigger1 = animelem = 2
anim = 3440
ID = 3440
pos = -60,0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = .6,.6
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 10
x = 6
[State 0, VelSet]
type = posadd
trigger1 = animelem = 2 ;time = 0
x = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,2
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,21
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,23
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NA
guardflag = MA
animtype = light
damage = 10
pausetime = 7,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,22
guardsound = S4,1
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -2
air.velocity = -2,-1
Fall = 0
getpower = 0,0
envshake.time = 10

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
triggerall = numhelper(8101) = 0
trigger1 = Movehit = 1
helpertype = normal
name = "HitSpark"
ID = 8101
stateno = 8101
pos = 80,-50
postype = p1
facing = 1
ownpal = 1
ignorehitpause=1

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 310

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 201

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
; B-2 :
;-------------------------------------------------------------------------------
[Statedef 310, Combo B3]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 310
poweradd = 50
velset = 0,0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,3
volume = 999

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S1,21
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,23
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NA
guardflag = MA
animtype = hard
damage = 20
pausetime = 6,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,22
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -4
air.velocity = -4,-1
Fall = 0
getpower = 0,0
envshake.time = 10

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
triggerall = numhelper(8101) = 0
trigger1 = Movehit = 1
helpertype = normal
name = "HitSpark"
ID = 8101
stateno = 8101
pos = 80,-60
postype = p1
facing = 1
ownpal = 1
ignorehitpause=1

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movehit
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 320

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movehit
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 201

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
; B-3 :
;-------------------------------------------------------------------------------
[Statedef 320, Combo B4]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 320
poweradd = 100
velset = 0,0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S0,15
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S0,15
volume = 999

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
trigger2 = movehit = 1
x = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 5
trigger3 = animelem = 8
value = S1,23
volume = 50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 13
value = S1,21
volume = 999

[State 0, HitDef]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 5
trigger3 = animelem = 8
attr = S,SA
guardflag = MA
animtype = light
damage = 10
pausetime = 3,20
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,22
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -2
air.velocity = -2,-1
Fall = 0
getpower = 0,0
envshake.time = 10

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
triggerall = numhelper(8101) = 0
trigger1 = Movehit = 1
helpertype = normal
name = "HitSpark"
ID = 8101
stateno = 8101
pos = 80,-50
postype = p1
facing = 1
ownpal = 1
ignorehitpause=1

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = time > 30
triggerall = movehit
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 330

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
; B-4 :
;-------------------------------------------------------------------------------
[Statedef 330, Combo B5]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 330
poweradd = 200
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,6
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,6
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S1,21
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,23
volume = 50

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 2

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,SA
guardflag = MA
animtype = Heavy
damage = 40
pausetime = 7,12
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,23
guardsound = S4,1
ground.type = High
ground.slidetime = 30
ground.hittime = 30
ground.velocity = -3,-8
air.velocity = -3,-8
Fall = 1
getpower = 0,0
envshake.time = 20

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
trigger1 = numhelper(8103) = 0 && movehit = 1
helpertype = normal
name = "HitSpark"
ID = 8103
stateno = 8103
pos = 70,-60;0, -25
postype = p1
facing = 1
ownpal = 1
supermove=9999
pausemove=9999
ignorehitpause=1

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movehit = 1;time > 20
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value =  331

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
[Statedef 331, Combo B6]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 331
velset = 0,0
sprpriority = 0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time > 10 ;[17,25]
value = 1+time*1
;scale =
ignorehitpause = 1


[State 0, Garrazo]
type = Explod
trigger1 = animelem = 3
anim = 3440
ID = 3440
pos = -45,-70
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = .6,.5
sprpriority = 2
ontop = 1
angle = -35
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, Garrazo]
type = Explod
trigger1 = animelem = 3
anim = 3440
ID = 3440
pos = 40,-20
postype = p1
facing = -1
vfacing = 1
bindtime = -1
removetime = -2
scale = .6,.5
sprpriority = 2
ontop = 1
angle = 20
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
triggerall = numhelper(8101) = 0
trigger1 = Movehit = 1
helpertype = normal
name = "HitSpark"
ID = 8101
stateno = 8101
pos = 80,-50
postype = p1
facing = 1
ownpal = 1
ignorehitpause=1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S1,21
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,23
volume = 50

[State 0, strike effect]
type = Helper
triggerall = numhelper (19991)= 0
trigger1 = movehit = 1;time = 0;animelem = 3
helpertype = normal
name = "strike effects"
ID = 19991
stateno = 19991;9993
pos = 0,-30;5,-30-random%15
postype = p2
facing = 1
ownpal = 1
ignorehitpause = 1
sprpriority = 9;5-random%5

[State 0, Pause]
type = Pause
trigger1 = time = [12,18]
time = 2

[State 0, VelSet]
type = VelSet
trigger1 = movehit = 1
x = -4
y = -6
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time > 10
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,4
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,16
volume = 50

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 2
statetype = A
movetype = A
physics = A

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 7
y = -5

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NA
guardflag = MA
animtype = heavy
damage = 20
pausetime = 6,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,2
guardsound = S4,1
ground.type = High
ground.slidetime = 10
p2stateno = 888
ground.hittime = 10
ground.velocity = -4,-9.5
air.velocity = -4,-8.5
Fall = 1
Fall.recover = 1
Fall.recovertime = 40
getpower = 0,0
envshake.time = 15

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; Down B - Tierra
[Statedef 350]
type    = C
movetype= A
physics = C
ctrl = 0
anim = 350
poweradd = 100
sprpriority = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = [0,4]
x = 2
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,4
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,4
volume = 999

[State 0, Garrazo]
type = Explod
trigger1 = animelem = 3
anim = 3460
ID = 3460
pos = 20,-20
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = .5,.5
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S1,21
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,23
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NA
hitflag = MAFDE
guardflag = C
animtype = light
damage = 20
pausetime = 10,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,22
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -2,-8
air.velocity = -2,-6
Fall = 1
Fall.recover = 1
Fall.recovertime = 40
getpower = 0,0
envshake.time = 10

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
triggerall = numhelper(8101) = 0
trigger1 = Movehit = 1
helpertype = normal
name = "HitSpark"
ID = 8101
stateno = 8101
pos = 60,-30
postype = p1
facing = 1
ownpal = 1
ignorehitpause=1

[State 200, JUMP]
type = ChangeState
triggerall = movehit
trigger1 = ailevel = 0 && command = "up"
trigger2 = ailevel > 0 && random < (ailevel * 50)*2
value = 40

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 12
ctrl = 1
;-------------------------------------------------------------------------------
; Ki FX - FXADD
[Statedef 415]
type = A
movetype = I
physics = N
ctrl = 0
anim = 415
sprpriority = 4

[State 0, PalFXWiz]
type = PalFX
TriggerALL = PalNo!= 5||PalNo!= 11
trigger1 = 1
time = 99999
add = -0,-0,0
mul = 356,356,356
color = 256

[State 0, PalFXWiz]
type = PalFX
TriggerALL = PalNo = 5||PalNo = 11
trigger1 = 1
time = 99999
add = 0,-100,-75
mul = 456,356,356
color = 0

[State 0, AfterImage]
type = AfterImage
Triggerall = PalNo != 5||PalNo != 11
trigger1 = !Time
time = -1
length = 60
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 50,25,6
paladd = 0,0,0
palmul = .65,.5,.5
timegap = 2
framegap = 1
trans = Add
ignorehitpause = 1

[State 0, AfterImage]
type = AfterImage
TriggerALL = PalNo = 5 || PalNo = 11
trigger1 = !Time
time = -1
length = 60
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 50,0,6
paladd = 0,0,0
palmul = .65,.5,.5
timegap = 2
framegap = 1
trans = add
ignorehitpause = 1

[State 500, Perfect Angle]
type = AngleSet
trigger1 = 1
value = ((atan((-1*Parent,Vel Y)/Parent,Vel X))*(360/(2*pi)))+0

[State 500, Draw]
type = AngleDraw
trigger1 = 1
scale = .5,.5

[State 0, Trans]
type = Trans
trigger1 = 1
trans = Add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0


;-------------------------------------------------------------------------------
; Ki FX - FXSUB
[Statedef 416]
type = A
movetype = I
physics = N
ctrl = 0
anim = 415
sprpriority = 4

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 99999
add = 0,0,0
mul = 0,256,512
color = 0

[State 500, Perfect Angle]
type = AngleSet
trigger1 = 1
value = ((atan((-1*Parent,Vel Y)/Parent,Vel X))*(360/(2*pi)))+0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = sub

[State 500, Draw]
type = AngleDraw
trigger1 = 1
scale = .5,.5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;===============================================================================
; C:
;-------------------------------------------------------------------------------
[Statedef 400]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 400
poweradd = -300
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,8
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,8
volume = 999

[State 0, Land]
type = Explod
trigger1 = time = 0
anim = 80016
ID = 70231
pos = 0,-35
postype = p1
facing = 1
removetime = -2
scale = .5,.5
sprpriority = 21
removeongethit = 0
ignorehitpause = 1
supermovetime = 999
pausemovetime = 999
ownpal = 1

[State 0, Speed effect]
type = Helper
trigger1 = time = 30;timemod = 4,0 && time > 1 ;&& pos y = 0
helpertype = normal
name = "Speed effects"
ID = 80029
stateno = 80029 ;9993
pos = 30,0;(30-Random%20),(-15-Random%35);0,0;5,-30-random%15
postype = p1
facing = 1
ownpal = 1
size.xscale = 1.2
size.yscale = 1.2
[State 0, Homing Energy Blast - Helper]
type = Helper
trigger1 = Time = 30
helpertype = normal
name = "Homing Energy Blast - Helper"
ID = 1405
stateno = 1405
pos = 35,-45
postype = p1
ownpal = 1
size.xscale = 1
size.yscale = 1.1


[State 0, VelSet]
type = VelSet
trigger1 = time = [30,35]
x = -1
ignorehitpause = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Ki Blast - FXADD
[Statedef 407]
type = A
movetype = I
physics = N
ctrl = 0
anim = 484
sprpriority = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 0, PalFXWiz]
type = PalFX
TriggerALL = PalNo!= 5||PalNo!= 11
trigger1 = 1
time = 99999
add = -0,-0,0
mul = 356,356,356
color = 256

[State 0, PalFXWiz]
type = PalFX
TriggerALL = PalNo = 5||PalNo = 11
trigger1 = 1
time = 99999
add = 0,-100,-75
mul = 456,356,356
color = 0

[State 0, AfterImage]
type = AfterImage
Triggerall = PalNo != 5||PalNo != 11
trigger1 = !Time
time = -1
length = 60
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 50,25,6
paladd = 0,0,0
palmul = .65,.5,.5
timegap = 2
framegap = 1
trans = Add
ignorehitpause = 1

[State 0, AfterImage]
type = AfterImage
TriggerALL = PalNo = 5 || PalNo = 11
trigger1 = !Time
time = -1
length = 60
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 50,0,6
paladd = 0,0,0
palmul = .65,.5,.5
timegap = 2
framegap = 1
trans = add
ignorehitpause = 1

[State 500, Perfect Angle]
type = AngleSet
trigger1 = 1
value = ((atan((-1*Parent,Vel Y)/Parent,Vel X))*(360/(2*pi)))+0

[State 500,Draw]
type=AngleDraw
trigger1 = 1
scale = .15,.15

[State 0, Trans]
type = Trans
trigger1 = 1
trans = Add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Parent,Stateno != 405
trigger2 = Parent,Stateno = 406


;-------------------------------------------------------------------------------
; Ki Blast - FXSUB
[Statedef 408]
type = A
movetype = I
physics = N
ctrl = 0
anim = 484
sprpriority = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 99999
add = 0,0,0
mul = 0,256,512
color = 0

[State 500, Perfect Angle]
type = AngleSet
trigger1 = 1
value = ((atan((-1*Parent,Vel Y)/Parent,Vel X))*(360/(2*pi)))+0

[State 500, Draw]
type = AngleDraw
trigger1 = 1
scale = .15,.15

[State 0, Trans]
type = Trans
trigger1 = 1
trans = sub

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Parent,Stateno != 405
trigger2 = Parent,Stateno = 406
;===============================================================================
; Z Skill:
;-------------------------------------------------------------------------------
; Start
[Statedef 430]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 430
velset = 0,0
poweradd = -1000
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S0,11
volume = 999

[State 0, Speed effect]
type = Helper
trigger1 = time = 0
triggerall = pos Y = 0;timemod = 4,0 ;&& time > 4 ;&& pos y = 0
helpertype = normal
name = "Speed effects"
ID = 7991
stateno = 10505 ;9993
pos = 0,5;(30-Random%20),(-15-Random%35);0,0;5,-30-random%15
postype = p1
facing = 1
ownpal = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S40,1
volume = 50

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 6
y = -5

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 2
statetype = A
movetype = A
physics = A

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S1,21
volume = 50
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S1,23
volume = 50

[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 1271
ID = 1051
pos = 25,-110
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = .6,.6
sprpriority = 1
ontop = 1
ownpal = 1
removeongethit = 1

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = A,SP
animtype  = Hard
damage    = 10,0
Hitflag = MAFDE
guardflag = MA
sparkno = -1
pausetime = 2,2
guard.sparkno = S7010
sparkxy = -8,-25
hitsound   = S1,22
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0,-8
air.velocity = 0,-4
Fall = 0
Sprpriority = 3
Getpower = 0,0
envshake.time = 10

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
triggerall = numhelper(8101) = 0
trigger1 = Movehit = 1
helpertype = normal
name = "HitSpark"
ID = 8101
stateno = 8101
pos = 75,-30
postype = p1
facing = 1
ownpal = 1
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
Trigger1 = movehit
value = 431

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; Shining Slash - Fin
[Statedef 431]
type    = A
movetype= A
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 431
sprpriority = 2

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 2
time = 40
length = 15
timegap = 2
framegap = 1
trans = add
ignorehitpause = 1
persistent = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,15
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,15
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2||animelem = 4||animelem = 6||animelem = 8
value = S2,17
volume = 50

[State 200, 1]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 6
trigger4 = animelem = 8
attr = S, HA
animtype  = Heavy
damage    = 5,0
guardflag = MA
pausetime = 2,12
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,22
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = 0,0
air.velocity = 0,0
Fall = 1
Fall.recover = 0
getpower = 0,0
envshake.time = 8
envshake.ampl = -6

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
trigger5 = animelem = 6
trigger6 = animelem = 7
trigger7 = animelem = 8
trigger8 = animelem = 9
helpertype = normal
name = "HitSpark"
ID = 8101
stateno = 8101
pos = 0,-65
postype = p2
facing = 1
ownpal = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
trigger2 = animelem = 8
anim = 1270
ID = 1051
pos = -5,-55
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = .7,.7
sprpriority = 1
ontop = 1
ownpal = 1
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 1271
ID = 1051
pos = 60,-130
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = .7,.7
sprpriority = 1
ontop = 1
ownpal = 1
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 6
anim = 1271
ID = 1051
pos = 25,-110
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = .7,.7
sprpriority = 1
ontop = 1
ownpal = 1
removeongethit = 1

[State 200, End]
type = ChangeState
trigger1 = time = 50
value = 1432
ctrl = 0
;-------------------------------------------------------------------------------
; Shining Slash - Fin
[Statedef 1432]
type    = A
movetype= A
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 432
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 15
value = S0,6
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 15
value = S0,6
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2||animelem = 4||animelem = 6||animelem = 8
value = S2,17
volume = 50

[State 200, 1]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 6
trigger4 = animelem = 8
attr = S, HA
animtype  = Heavy
damage    = 5,0
guardflag = MA
pausetime = 0,30
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,22
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = 0,0
air.velocity = 0,0
Fall = 1
Fall.recover = 0
getpower = 0,0
envshake.time = 8
envshake.ampl = -6

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
trigger5 = animelem = 6
helpertype = normal
name = "HitSpark"
ID = 8101
stateno = 8101
pos = 0,-65
postype = p2
facing = 1
ownpal = 1
ignorehitpause = 1
supermovetime =999
pausemovetime = 999


[State 0, Explod]
type = Explod
trigger1 = animelem = 3 || animelem = 4
anim = 1271-random%1
ID = 1051
pos = 60,-40
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = .5,.5
sprpriority = 1
ontop = 1
angle = random
ownpal = 1
removeongethit = 1


[State 0, SuperPause]
type = SuperPause
trigger1 = animelem = 8
time = 60
movetime = 60
anim = -1
sound = -1
pos = 9999,9999
unhittable = 1
darken = 0

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 8
v = 12
value = -100

[State 0, VarAdd]
type = VarAdd
triggerall = var(12) < 0
trigger1 = time >= 80
v = 12
value = 10

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time > 35;animelem = 9
time = 1
add = var(12),var(12),var(12)

[State 0, Granada]
type = Helper
trigger1 = animelem = 10
helpertype = normal
name = "Granada"
ID = 2150
stateno = 2150
pos = 65,-65
postype = p1
ownpal = 1
size.xscale = 1.2
size.yscale = 1.2
ignorehitpause = 1
pausemovetime = 999
supermovetime = 999

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 11
statetype = A
movetype = A
physics = A

[State 200, End]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; Shining Slash - Granada
[Statedef 2150]
type    = S
movetype= A
physics = N
juggle  = 2
ctrl = 0
anim = 2150
sprpriority = 5

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 80023
ID = 80023
pos = 40,0
postype = p1  ;p2,front,back,left,right
bindtime = 1
vel = -1,0
removetime = -2
pausemovetime = 0
scale = .5,.5
ownpal = 1
sprpriority = 12
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 80023
ID = 80023
pos = 0,0
postype = p1  ;p2,front,back,left,right
bindtime = 1
vel = -1,0
removetime = -2
pausemovetime = 0
scale = .8,.8
ownpal = 1
sprpriority = 12

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 50
ampl = -4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,18
volume = 50

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = A, SP
animtype  = Heavy
damage    = 40,0
Hitflag = MAFDE
guardflag = MA
pausetime = 0,4
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S5,26
guardsound = S5,26
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -8,-4
air.velocity = -8,-4
Fall = 1
Fall.recover = 0
Sprpriority = 3
Getpower = 0,0
PalFX.time = 30
PalFX.add = -200,-200,-200
PalFX.mul = 256,256,256
PalFX.sinadd = 50,50,50,50
PalFX.invertall = 0
PalFX.color = 256

[State 0, Break FX ADD]
type = Explod
triggerall = numexplod(1270) = 0
trigger1 = movecontact = 1
anim = 336
ID = 1270
pos = -30,-70
postype = p2
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4,.4
sprpriority = 2
ontop = 1
ownpal = 1
Angle = 0+Random%180
[State 0, Break FX SUB]
type = Explod
triggerall = numexplod(1271) = 0
trigger1 = movecontact = 1
anim = 337
ID = 1271
pos = -30,-70
postype = p2
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4,.4
sprpriority = 0
ontop = 0
ownpal = 1
Angle = 0+Random%180

[State 0, TargetState]
type = TargetState
triggerall = p2stateno != 4425
trigger1 = movehit = 1
value = 425

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 200, End]
type = Destroyself
trigger1 = animtime = 0
;-------------------------------------------------------------------------------
; Pared `P2
[Statedef 4425]
type    = A
movetype= H
physics = A
juggle  = 2
velset = 0,0
ctrl = 0
sprpriority = 2
facep2 = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ChangeAnim2]
type = ChangeAnim
Triggerall = authorname = "CobraG6"
trigger1 = time = 0
value = 5030+(var(10))

[State 0, ChangeAnim2]
type = ChangeAnim
Triggerall = authorname != "CobraG6"
trigger1 = time = 0
value = 5030

[State 0, VelSet]
type = VelSet
trigger1 = 1
y = -2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = -13-ifelse(enemy,var(2) = 1,10,0)

[State 200, End]
type = ChangeState
trigger1 = backedgebodydist < 5
trigger2 = p2bodydist x >= 300
trigger3 = time >= 30
value = 4426
;-------------------------------------------------------------------------------
; Pared `P2 Fin
[Statedef 4426]
type    = A
movetype= H
physics = A
juggle  = 2
velset = 0,0
ctrl = 0
sprpriority = 2

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -10

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
y = -4
x = 3

[State 200, End]
type = selfstate
trigger1 = time = 1
value = 5050

;===============================================================================
; Down Special:
;-------------------------------------------------------------------------------
; Start
[Statedef 450]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 450
poweradd = 0
velset = 0,0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 4
value = S1,21
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,10
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,10
volume = 999

[State 0, Pulsos]
type = Helper
triggerall = time = [10,35]
trigger1 = timemod = 5,0
helpertype = normal
name = "Pulsos"
ID = 835
stateno = 835
pos = 0,0
postype = p1

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 3
time = 10
ampl = -2

[State aura5]
type = Explod
trigger1 = animelem = 3
Anim = 6025
ID = 6025
pos = 35,-50
sprpriority = -2
removeongethit = 1
removetime = -2
bindtime = 1
ownpal = 1
ontop = 0
scale = .35,.35

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S2,15
volume = 50

[State 1070, 3]
type = ReversalDef
triggerall = p2bodydist x <= 200
triggerall = time > 10
trigger1 = time = [10,40]
reversal.attr = SCA,NA,SA,HA,NT,ST,HT
numhits = 0
pausetime = 0,0
P1StateNo = 451
p2facing = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Fin
[Statedef 451]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 451
poweradd = 300
sprpriority = -2

[State 0, Speed FX]
type = Explod
trigger1 = animelem = 2
anim = 580
ID = 001
pos = -25,-50
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = 1,.6
sprpriority = 2
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
Trans = Sub
Angle = 90

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 7022
ID = 1051
pos = -15,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .9,.9
velocity = -2
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 7035
ID = 1001
pos = -30,-50
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .5,.5
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S1,21
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S1,21
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,23
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,23
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S5,30
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,16
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,16
volume = 999

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = unguardable

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 30
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
x = 0
ignorehitpause = 1

[State 0, Pause]
type = Pause
trigger1 = time = [0,5]
time = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = animelem = 2
time = 30
length = 10
palcolor = 256
palinvertall = 0
palbright = 30,30,30
palcontrast = 120,120,220
palpostbright = 0,0,0
paladd = 2,2,6
palmul = .65,.65,.75
timegap = 1
framegap = 1
trans = add

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = -5

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, SA
animtype  = Light
damage    = 0
hitflag = MAF
guardflag = MA
pausetime = 0,35
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,22
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0,0
Fall = 0
Getpower = 0,0
numhits = 0
kill = 0
envshake.time = 10

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
triggerall = numhelper(8101) = 0
trigger1 = Movehit = 1
helpertype = normal
name = "HitSpark"
ID = 8101
stateno = 8101
pos = 0,-60
postype = p2
facing = 1
ownpal = 1
ignorehitpause = 1

[State 0, Explosion - Hit]
type = Helper
trigger1 = animelem = 6
helpertype = normal
name = "Explosion - Hit"
ID = 1204
stateno = 1204
pos = 0,-20
postype = p2
facing = -1
ownpal = 1
Size.xscale = .5
size.yscale = .5

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Explosion - Hit
[Statedef 1204]
type    = A
movetype= A
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 455
sprpriority = 3

[State 0, Explod]
Type = Explod
trigger1 = time = 0
Anim = 1470
ID = 1470
Pos = 0,25
PosType = P1
RemoveTime = -2
SuperMoveTime = -1
PauseMoveTime = -1
Scale = .8,.2
SprPriority = -5
OwnPal = 1
RemoveOnGetHit = 0
IgnoreHitPause = 1

[State 0, Explosion]
type = Explod
trigger1 = time = 0
anim = 1060
ID = 1060
pos = 0,-60
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 1,1
sprpriority = 3
ontop = 1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,12
volume = 50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,24
volume = 999

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = unguardable

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, SA
animtype  = Up
damage    = 50
Hitflag = MAFDE
guardflag = MA
pausetime = 0,12
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = -1
guardsound = -1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0,-8
air.velocity = 0,-8
Fall = 1
Fall.recover = 0
Getpower = 0,0
PalFX.time = 30
PalFX.add = -200,-200,-200
PalFX.mul = 256,256,256
PalFX.sinadd = 50,50,50,50
PalFX.invertall = 0
PalFX.color = 256
Envshake.time = 30

[State 200, End]
type = Destroyself
trigger1 = animtime = 0

;-------------------------------------------------------------------------------
; Ki FX - FXADD
[Statedef 483]
type = A
movetype = I
physics = N
ctrl = 0
anim = 415
sprpriority = 4

[State 0, PalFXWiz]
type = PalFX
TriggerALL = PalNo!= 5||PalNo!= 11
trigger1 = 1
time = 99999
add = -0,-0,0
mul = 356,356,356
color = 256

[State 0, PalFXWiz]
type = PalFX
TriggerALL = PalNo = 5||PalNo = 11
trigger1 = 1
time = 99999
add = 0,-100,-75
mul = 456,356,356
color = 0

[State 0, AfterImage]
type = AfterImage
Triggerall = PalNo != 5||PalNo != 11
trigger1 = !Time
time = -1
length = 60
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 50,25,6
paladd = 0,0,0
palmul = .65,.5,.5
timegap = 2
framegap = 1
trans = Add
ignorehitpause = 1

[State 0, AfterImage]
type = AfterImage
TriggerALL = PalNo = 5 || PalNo = 11
trigger1 = !Time
time = -1
length = 60
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 50,0,6
paladd = 0,0,0
palmul = .65,.5,.5
timegap = 2
framegap = 1
trans = add
ignorehitpause = 1

[State 500, Perfect Angle]
type = AngleSet
trigger1 = 1
value = ((atan((-1*Parent,Vel Y)/Parent,Vel X))*(360/(2*pi)))+0

[State 500, Draw]
type = AngleDraw
trigger1 = 1
scale = .5,.5
value = -45

[State 0, Trans]
type = Trans
trigger1 = 1
trans = Add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0


;-------------------------------------------------------------------------------
; Ki FX - FXSUB
[Statedef 484]
type = A
movetype = I
physics = N
ctrl = 0
anim = 415
sprpriority = 4

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 99999
add = 0,0,0
mul = 0,256,512
color = 0

[State 500, Perfect Angle]
type = AngleSet
trigger1 = 1
value = ((atan((-1*Parent,Vel Y)/Parent,Vel X))*(360/(2*pi)))+0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = sub

[State 500, Draw]
type = AngleDraw
trigger1 = 1
scale = .5,.5
value = -45

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;-------------------------------------------------------------------------------
; Down C air
[Statedef 480]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 480
poweradd = -300
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S200,5
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S200,5
volume = 999

[State 0, Ki Blast - FXADD]
type=Helper
trigger1 = Time = 10
helpertype = normal
name = "Ki Blast - FXADD"
ID = 483
stateno = 483
postype = p1
pos = 40,-25
facing = 1
keyctrl = 0
ownpal = 1
[State 0, Ki Blast - FXSUB]
type = Helper
trigger1 = Time = 10
helpertype = normal
name = "Ki Blast - FXSUB"
ID = 484
stateno = 484
postype = p1
pos = 40,-25
facing = 1
keyctrl = 0
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 8
x = -1
y = .5

[State 0, VelSet]
type = VelSet
trigger1 = time = 10
x = -2
y = -4

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 10
statetype = A
movetype = I
physics = A

[State 0, Homing Energy Blast - Helper]
type = Helper
trigger1 = time = 12
helpertype = normal
name = "Homing Energy Blast - Helper"
ID = 481
stateno = 481
pos = 45,-20
postype = p1
ownpal = 1

[State 200, Run + Run IA]
type = ChangeState
triggerall = var(18) = 0
triggerall = time >= 25
trigger1 = ailevel = 0 && command = "FF"
trigger2 = ailevel > 0 && random < (ailevel * 50)
value = ifelse(pos y >= 0,60,65)
[State 200, Run + Run IA]
type = ChangeState
triggerall = var(18) = 0
triggerall = time >= 25
trigger1 = ailevel = 0 && command = "BB"
trigger2 = ailevel > 0 && random < (ailevel * 50)
value = 70
[State 200, Run + Run IA]
type = ChangeState
triggerall = time >= 15
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "c"
trigger2 = ailevel > 0 && random < (ailevel * 50)
value = 480


[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; H.E.B. - Helper
[Statedef 481]
type    = A
movetype= A
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 485
sprpriority = 10

[State 0, Ki Blast - FXADD]
type=Helper
trigger1 = Time = 0
helpertype = normal
name = "Ki Blast - FXADD"
ID = 485
stateno = 485
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
[State 0, Ki Blast - FXSUB]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "Ki Blast - FXSUB"
ID = 486
stateno = 486
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 10
ampl = -2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 10
y = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,16
volume = 50

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
IgnoreHitPause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, SP
damage = 50
animtype  = Medium
guardflag = MA
hitflag = MAFDE
pausetime = 0,8
Guard.PauseTime = 0,12
sparkno = -1
guard.sparkno = -1
hitsound   = -1
guardsound = -1
ground.type = High
ground.slidetime = 5
ground.hittime  = 20
ground.velocity = 0,-8
air.type = High
air.velocity = 0,-8
air.hittime = 20
Fall = 1
getpower = 0,0
PalFX.time = 30
PalFX.add = -200,-200,-200
PalFX.mul = 256,256,256
PalFX.sinadd = 50,50,50,50
PalFX.invertall = 0
PalFX.color = 256

[State 270, hitoverride]
type = hitoverride
trigger1 = 1
attr = SCA, NT, ST, HT, NA, SA, HA,NP,SP,HP
stateno = 482
time = 1

[State 1002, ChangeState]
type = ChangeState
trigger1 = MoveContact
Trigger2 = time = 200
trigger3 = pos y >= -5
trigger4 = frontedgebodydist < 0
value = 482
ctrl = 0

;-------------------------------------------------------------------------------
; H.E.B. - Break
[Statedef 482]
type    = S
movetype= I
physics = S
juggle  = 2
ctrl = 0
anim = 9999
velset = 0,0
sprpriority = 3

[State 0, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 10
ampl = -2

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = 10
y = 0

[State 0, Break FX ADD]
type = Explod
trigger1 = time = 0
anim = 336
ID = 1270
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .6,.6
sprpriority = 2
ontop = 1
ownpal = 1
Angle = 0+Random%180
[State 0, Break FX SUB]
type = Explod
trigger1 = time = 0
anim = 337
ID = 1271
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .6,.6
sprpriority = 0
ontop = 0
ownpal = 1
Angle = 0+Random%180

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,12
volume = 999

[State 200, End]
type = Destroyself
trigger1 = animtime = 0

;-------------------------------------------------------------------------------
; Ki Blast - FXADD
[Statedef 485]
type = A
movetype = I
physics = N
ctrl = 0
anim = 484
sprpriority = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 0, PalFXWiz]
type = PalFX
TriggerALL = PalNo!= 5||PalNo!= 11
trigger1 = 1
time = 99999
add = -0,-0,0
mul = 356,356,356
color = 256

[State 0, PalFXWiz]
type = PalFX
TriggerALL = PalNo = 5||PalNo = 11
trigger1 = 1
time = 99999
add = 0,-100,-75
mul = 456,356,356
color = 0

[State 0, AfterImage]
type = AfterImage
Triggerall = PalNo != 5||PalNo != 11
trigger1 = !Time
time = -1
length = 60
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 50,25,6
paladd = 0,0,0
palmul = .65,.5,.5
timegap = 2
framegap = 1
trans = Add
ignorehitpause = 1

[State 0, AfterImage]
type = AfterImage
TriggerALL = PalNo = 5 || PalNo = 11
trigger1 = !Time
time = -1
length = 60
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 50,0,6
paladd = 0,0,0
palmul = .65,.5,.5
timegap = 2
framegap = 1
trans = add
ignorehitpause = 1

[State 500, Perfect Angle]
type = AngleSet
trigger1 = 1
value = ((atan((-1*Parent,Vel Y)/Parent,Vel X))*(360/(2*pi)))+0

[State 500,Draw]
type=AngleDraw
trigger1 = 1
scale = .2,.2
value = -45

[State 0, Trans]
type = Trans
trigger1 = 1
trans = Add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Parent,Stateno != 481
trigger2 = Parent,Stateno = 482


;-------------------------------------------------------------------------------
; Ki Blast - FXSUB
[Statedef 486]
type = A
movetype = I
physics = N
ctrl = 0
anim = 484
sprpriority = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 99999
add = 0,0,0
mul = 0,256,512
color = 0

[State 500, Perfect Angle]
type = AngleSet
trigger1 = 1
value = ((atan((-1*Parent,Vel Y)/Parent,Vel X))*(360/(2*pi)))+0

[State 500, Draw]
type = AngleDraw
trigger1 = 1
scale = .2,.2
value = -45

[State 0, Trans]
type = Trans
trigger1 = 1
trans = sub

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Parent,Stateno != 481
trigger2 = Parent,Stateno = 482
;-------------------------------------------------------------------------------
; Pulsos
[Statedef 3075]
type    = A
movetype= I
physics = N
sprpriority = 5

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = Root,anim
elem = Root,animelemno(0)

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 250-time*25,250+time*25

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
Scale = 1+time*.01,1+time*.01

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
pos = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999999999999999999999999999999

[State 200, End]
type = Destroyself
trigger1 = time >= 10

;===============================================================================
; Side Special :
;-------------------------------------------------------------------------------
[Statedef 490]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 490
poweradd = -200
velset = 0,0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,9
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,9
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,21
volume = 999

[State 0, Pause]
type = Pause
Triggerall = prevstateno = [200,350]
trigger1 = time = [0,10]
time = 1

[State 0, Pulsos]
type = Helper
trigger1 = (time = [25,75]) && timemod = 10,0
helpertype = normal
name = "Pulsos"
ID = 3075
stateno = 3075
pos = 0,0
postype = p1

[State 200, End]
type = ChangeState
triggerall = time >= 20
trigger1 = ailevel = 0 && command != "hold_c"
trigger2 = ailevel > 0 && p2bodydist x < 100
trigger3 = ailevel > 0 && p2bodydist x >= 100 && p2bodydist x < 300 && time = 15+random%60
trigger4 = time = 80
value = 491

;-------------------------------------------------------------------------------
[Statedef 491]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 491
velset = 0,0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S1,21
volume = 999


[State 0, Speed effect]
type = Helper
trigger1 = time = 2;timemod = 4,0 && time > 1 ;&& pos y = 0
helpertype = normal
name = "Speed effects"
ID = 80029
stateno = 80029 ;9993
pos = 25,0;(30-Random%20),(-15-Random%35);0,0;5,-30-random%15
postype = p1
facing = 1
ownpal = 1
size.xscale = 1
size.yscale = 1.05

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S5,30
volume = 999

[State 0, Speed effect]
type = Helper
triggerall = vel X > 8
trigger1 = timemod = 3,0 ;&& time > 4 ;&& pos y = 0
helpertype = normal
name = "Speed effects"
ID = 7991
stateno = 10505 ;9993
pos = 0,5;(30-Random%20),(-15-Random%35);0,0;5,-30-random%15
postype = p1
facing = 1
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 80023
ID = 80023
pos = 20,-30
postype = p1  ;p2,front,back,left,right
bindtime = 1
vel = -1,0
removetime = -2
pausemovetime = 0
scale = .3,.4
ownpal = 1
sprpriority = 12

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time = [0,10]
value = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 7022
ID = 1051
pos = -15,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .9,.9
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x = 40

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,SA
guardflag = MA
animtype = Heavy
damage = 10
pausetime = 0,50
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,22
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = 0
air.velocity = 0
Fall = 0
envshake.time = 20

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
trigger1 = numhelper(8103) = 0 && movehit = 1
helpertype = normal
name = "HitSpark"
ID = 8103
stateno = 8103
pos = 60,-60;0, -25
postype = p1
facing = 1
ownpal = 1
supermove=9999
pausemove=9999
ignorehitpause=1

[State 0, AfterImage]
type = AfterImage
trigger1 = animelem = 1
time = 30
length = 10
palcolor = 256
palinvertall = 0
palbright = 30,30,30
palcontrast = 120,120,220
palpostbright = 0,0,0
paladd = 2,2,6
palmul = .65,.65,.75
timegap = 1
framegap = 1
trans = add

[State 200, REMATE]
type = ChangeState
trigger1 = movehit = 1
value = 492
ctrl = 0

[State 0, VelMul]
type = VelMul
trigger1 = time > 10
x = .9

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
[Statedef 492]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 492
velset = 0,0
sprpriority = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, Pause]
type = Pause
trigger1 = time = [0,10]
time = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,28
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S1,21
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S1,21
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S200,11
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S200,11
volume = 999

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 20

[State 0, Cortes]
type = Helper
trigger1 = animelem = 5
helpertype = normal
name = "Cortes"
ID = 495
stateno = 495
pos = 0,-50
postype = p2
facing = 1
keyctrl = 0
ownpal = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
[Statedef 495]
type    = A
movetype= A
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 495
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 200, 1]
type = HitDef
trigger1 = timemod = 5,0
attr = A, HP
animtype  = Heavy
damage    = 10
Hitflag = MAFDE
guardflag = MA
pausetime = 0,5
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,31
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0,-9
air.velocity = 0,-9
Fall = 1
Fall.recover = 40
Envshake.time = 10
Getpower = 0,0

[State 0, Pause]
type = Pause
trigger1 = movehit = 1
time = 2

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
trigger1 = Movehit = 1
helpertype = normal
name = "HitSpark"
ID = 8101
stateno = 8101
pos = -15+random%30, -80+random%30
postype = p2
facing = 1
ownpal = 1
ignorehitpause=1

[State 200, End]
type = Destroyself
trigger1 = time = 30
;-------------------------------------------------------------------------------
; Haoshoku Haki - Evitador de Infinitos
[Statedef 498]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 9999
sprpriority = 2

[State 200, End]
type = Destroyself
trigger1 = time = 200
;===============================================================================
; Air A :
;-------------------------------------------------------------------------------
[Statedef 600, Combo air A1]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 600
poweradd = 100
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,1
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,1
volume = 999

[State 0, VelSet]
type = VelSet
trigger1 = movehit = 1
x = 2
y = -2
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,16
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = A,NA
hitflag = MAFDE
guardflag = HA
animtype = light
damage = 10
pausetime = 6,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,1
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -2
air.velocity = -2,-5
Fall = 0
getpower = 0,0
envshake.time = 5

[State 0, Hit Spark]
type = Explod
trigger1 = numexplod(7000) = 0 && movehit = 1
anim = 7000
ID = 7000
pos = 50,-45
postype = p1
scale = .6,.6
sprpriority = 2
ownpal = 1
ignorehitpause = 1

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 601
[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 610

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;===============================================================================
[Statedef 601, Combo Air A2]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 601
poweradd = 100
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,1
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,1
volume = 999

[State 0, VelSet]
type = VelSet
trigger1 = movehit = 1
x = 2
y = -2
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,16
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = A,NA
hitflag = MAFDE
guardflag = HA
animtype = light
damage = 10
pausetime = 6,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,1
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -2
air.velocity = -2,-5
Fall = 0
getpower = 0,0
envshake.time = 5

[State 0, Hit Spark]
type = Explod
trigger1 = numexplod(7000) = 0 && movehit = 1
anim = 7000
ID = 7000
pos = 50,-45
postype = p1
scale = .6,.6
sprpriority = 2
ownpal = 1
ignorehitpause = 1

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 602
[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 610

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;===============================================================================
[Statedef 602, Combo Air A3]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 602
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,1
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,1
volume = 999

[State 0, VelSet]
type = VelSet
trigger1 = movehit = 1
x = 2
y = -2
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,16
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = A,NA
hitflag = MAFDE
guardflag = HA
animtype = light
damage = 10
pausetime = 6,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,1
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -2
air.velocity = -2,-5
Fall = 0
getpower = 0,0
envshake.time = 5

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 12
ignorehitpause = 1

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 610
[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 610

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;===============================================================================
; Air B :
;-------------------------------------------------------------------------------
[Statedef 610, Combo air 4]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 610
poweradd = 100
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,2
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,2
volume = 999

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 4
y = -3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,16
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = A,NA
hitflag = MAFDE
guardflag = HA
animtype = medium
damage = 20
pausetime = 6,10
sparkno = -1
sparkxy = -20,0
guard.sparkno = S7010
hitsound = S1,1
guardsound = S4,1
ground.type = High
ground.slidetime = 30
ground.hittime = 30
ground.velocity = -4
air.velocity = -4,-5
Fall = 0
getpower = 0,0
envshake.time = 10

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger3 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 611

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;===============================================================================
[Statedef 611, Combo air 5]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 611
poweradd = 1
sprpriority = 0

[State 0, Pause]
type = Pause
trigger1 = time = [0,5]
time = 2

[State 0, strike effect]
type = Helper
triggerall = numhelper (19991)= 0
trigger1 = movehit = 1;time = 0;animelem = 3
helpertype = normal
name = "strike effects"
ID = 19991
stateno = 19991;9993
pos = 0,-30;5,-30-random%15
postype = p2
facing = 1
ownpal = 1
ignorehitpause = 1
sprpriority = 9;5-random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,12
volume = 999

[State 0, VelSet]
type = VelSet
trigger1 = movehit = 1
x = -2
y = -5
[State 0, VelSet]
type = VelSet
trigger1 = time = 0;movehit = 1
x = 4
y = -3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,16
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = A,NA
hitflag = MAFDE
guardflag = HA
animtype = medium
damage = 20
pausetime = 12,12
sparkno = -1
sparkxy = -20,0
guard.sparkno = S7010
hitsound = S1,7
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -4
air.velocity = -4,-5
p2stateno = 888
Fall = 0
getpower = 0,0
envshake.time = 10

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;===============================================================================

; C:
;-------------------------------------------------------------------------------
; Start
[Statedef 620]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 620
poweradd = 100
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,6
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,6
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S1,21
volume = 50
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,23
volume = 50

[State 0, VelSet]
type = VelSet
trigger1 = movecontact = 1
x = -2
y = -6

[State 0, Pause]
type = Pause
Triggerall = prevstateno = [600,610]
trigger1 = time = [0,5]
time = 1

[State 0, VelSet]
type = VelSet
Triggerall = prevstateno = [600,610]
trigger1 = time = 0
x = 6
y = -4

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = A,SA
guardflag = HA
animtype = down
damage = 30
pausetime = 12,12
sparkno = -1
guard.sparkno = S7010
hitsound = S1,24
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -4,6
air.velocity = -4,6
Fall = 1
Fall.recover = 0
down.bounce = 1
fall.yvelocity = -9
getpower = 0,0
Envshake.time = 20

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
trigger1 = numhelper(8103) = 0 && movehit = 1
helpertype = normal
name = "HitSpark"
ID = 8103
stateno = 8103
pos = 70,-60;0, -25
postype = p1
facing = 1
ownpal = 1
supermove=9999
pausemove=9999
ignorehitpause=1

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = power >= 1000
triggerall = pos y < -70
triggerall = movehit
trigger1 = ailevel = 0 && command = "SPECIAL 3"
trigger2 = ailevel > 0 && random < (ailevel * 10)
value = 3180

[State 200, Combo + Combo IA]
type = ChangeState
Triggerall = power >= 300
triggerall = pos y < -70
triggerall = movehit
triggerall = command = "holddown"
trigger1 = ailevel = 0 && command = "c"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 480

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = command != "holdup"
triggerall = command != "holdback"
triggerall = command != "holddown"
triggerall = command != "holdfwd"
triggerall =  movehit = 1
trigger1 = ailevel = 0 && command = "x"
trigger1 = numhelper(40010) = 1
trigger2 = ailevel = 0 && command = "x"
trigger2 = numhelper(40020) = 1
trigger3 = ailevel = 0 && command = "x"
trigger3 = numhelper(40030) = 1
trigger4 = ailevel > 0 && random < (ailevel * 5)/5
trigger4 = numhelper(40010) = 1
trigger5 = ailevel > 0 && random < (ailevel * 5)/5
trigger5 = numhelper(40020) = 1
trigger6 = ailevel > 0 && random < (ailevel * 5)/5
trigger6 = numhelper(40030) = 1
value = 25000

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;===============================================================================
; Grab :
;-------------------------------------------------------------------------------
[Statedef 3380]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 800+var(11)
velset = 0,0
sprpriority = 0

[State -1, HitOverRide]
Type = HitOverRide
triggerall = p2bodydist x < 40
triggerall = time >= 0 && time < 30
Trigger1 = 1
Attr = SCA,AA,AP,AT
StateNO = 3381
Time = 1
IgnoreHitPause = 0

[State 0, Turn]
type = Turn
triggerall = p2bodydist x < -10
trigger1 = AnimElem = 2

[State 0, Explod]
type = Explod
trigger1 = time = 30
anim = 7022
ID = 1051
pos = -15,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .9,.9
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = timemod = 2,0 && time = [30,40]
trigger2 = time = 30
anim = 7022
ID = 1051
pos = -15,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .5,.5
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S40,1
volume = 50

[State 0, Onda FX]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "Onda FX"
ID = 4299
stateno = 4299
pos = 0,-50
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .5
size.yscale = .5

[State 0, PalFXWiz]
type = PalFX
trigger1 = animelem = 1
time = 10
add = 180,180,180
mul = 256,256,256
sinadd = 0,0,0,1
color = 256
removeongethit = 1
[State 300, 1]
type = PlaySnd
trigger1 = animelem = 1
value = S2,14
volume = 999
[State 300, 1]
type = PlaySnd
trigger1 = animelem = 1
value = S2,14
volume = 999

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 20
y = 0

[State 800, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = S, NT
givepower = 0
getpower = 0
guardflag =
hitflag = M-
sparkno = -1
sparkxy = -10,-70
hitsound = -1
pausetime = 0,0
p1stateno = 3281
p2stateno = 3270
p2facing = 1
p1facing = 1
fall.recover = 0
fall = 0
fall.recover = 0
down.bounce = 0
numhits = 0

[State 900, Tech Reset]
type = varset
trigger1 = Time = 0
var(20) = 7

[State 900, Tech Set]
type = varset
trigger1 = Time = 41
trigger1 = EnemyNear, MoveType = A
var(20) = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
[Statedef 3381]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 799+var(11)
velset = 0,0
sprpriority = 0

[State 0, Turn]
type = Turn
triggerall = p2bodydist x < -10
trigger1 = AnimElem = 2

[State 0, Explod]
type = Explod
trigger1 = time = 10
anim = 7022
ID = 1051
pos = -15,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .9,.9
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = timemod = 2,0 && time = [10,20]
trigger2 = time = 10
anim = 7022
ID = 1051
pos = -15,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .5,.5
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S40,1
volume = 50

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 20
y = 0

[State 800, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = S, NT
givepower = 0
getpower = 0
guardflag =
hitflag = M-
sparkno = -1
sparkxy = -10,-70
hitsound = -1
pausetime = 0,0
p1stateno = 3281
p2stateno = 3270
p2facing = 1
p1facing = 1
fall.recover = 0
fall = 0
fall.recover = 0
down.bounce = 0
numhits = 0

[State 900, Tech Reset]
type = varset
trigger1 = Time = 0
var(20) = 7

[State 900, Tech Set]
type = varset
trigger1 = Time = 21
trigger1 = EnemyNear, MoveType = A
var(20) = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
[Statedef 4299]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 6100
sprpriority = 10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 0
scale = 1+time*.5,1+time*.5
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 250-(time*20),256
ignorehitpause = 1

[State 200, End]
type = Destroyself
trigger1 = time = 30

;-------------------------------------------------------------------------------
[Statedef 3281]
type = S
movetype= A
physics = N
anim = 801+var(11)
poweradd = 300
sprpriority = 5

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 801, Tech Success]
type = VarSet
triggerall = NumTarget
triggerall = Time <= var(20)
trigger1 = (target,command = "holdfwd" || target,command = "holdback") && target,command != "holdup" && target,command != "holddown"
trigger1 = (target,AILevel=0)&&(target,command = "y" || target,command = "z")
trigger2 = (target,command = "holdfwd" || target,command = "holdback") && target,command != "holdup" && target,command != "holddown"
trigger2 = (target,AILevel=0)&&(target,command = "b" || target,command = "c")
trigger3 = (target,AILevel>0)&&(random<=floor(100*AIlevel*AIlevel/80.0))
var(21) = 1

[State 0, ]
type = posadd
trigger1 = time = 0
x = -10

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 70,0

[State 0, Pause]
type = Pause
trigger1 = time = [0,5]
time = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Unguardable

[State 300, 1]
type = PlaySnd
trigger1 = time = 0
value = S5,29
volume = 999
[State 300, 1]
type = PlaySnd
trigger1 = time = 0
value = S5,29
volume = 999

[State 0, Falso]
type = Explod
trigger1 = animelem = 1
anim = 802
ID = 802
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
velocity = 20
scale = .95,.95
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,21
volume = 50
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S1,23
volume = 50

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time < 30
value = 0
ignorehitpause  = 1

[State 0, PosSet]
type = PosSet
trigger1 = animelem = 2
y = -80
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 0
y = 10

[State 0, PosSet]
type = PosSet
trigger1 = animelem = 4
y = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,12
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,12
volume = 999

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NA
hitflag = MAFDE
guardflag = LA
animtype = light
damage = 50
pausetime = 5,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,24
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -2,-10
air.velocity = -2,-8
Fall = 1
Fall.recover = 0
Getpower = 0,0
envshake.time = 10

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
trigger1 = numhelper(8103) = 0 && movehit = 1
helpertype = normal
name = "HitSpark"
ID = 8103
stateno = 8103
pos = 70,-60;0, -25
postype = p1
facing = 1
ownpal = 1
supermove = 9999
pausemove = 9999
ignorehitpause=1

[State 810, State End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------
[Statedef 3270]
type    = S
movetype= H
physics = S

[State 820]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 0]
type = posset
trigger1 = 1
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 130+var(11)
elem = 1

[State 0, SelfState]
type = SelfState
trigger1 = time = 100
value = 0
ctrl = 1

;===============================================================================
; Run 1:
;-------------------------------------------------------------------------------
[Statedef 810]
type    = S
movetype= A
physics = N
ctrl = 0
anim = 810
poweradd = 1
sprpriority = 0

[State 0, Hit Spark]
type = Explod
trigger1 = time = 8
anim = 80031
ID = 7005
pos = 40,-45
postype = p1
facing = 1
bindtime = -1
scale = .5,.3
sprpriority = 2
ownpal = 1
ignorehitpause = 1

[State 0, Turn]
type = Turn
triggerall = time < 2
trigger1 = p2bodydist X < -20
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,16
volume = 50

[State 0, VelSet]
type = VelSet
trigger1 = time = [0,2]
x = 10
[State 0, VelSet]
type = Velmul
trigger1 = time > 3;time = 0
x = .9

[State 0, Polvo 2]
type = Explod
trigger1 = time = 0
anim = 7100
ID = 7100
pos = -30,10
postype = p1
scale = .3,.3
sprpriority = 2
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,8
volume = 999

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NA
guardflag = MA
animtype = light
damage = 20
pausetime = 10,10
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,2
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -14
air.velocity = -12,-2
air.fall = 1
envshake.time = 20
sprpriority = 0

[State 0, Explod]
type = Explod
trigger1 = time = 10
anim = 149
ID = 149
pos = 50,-35
postype = p1  ;p2,front,back,left,right
bindtime = 0
removetime = -2
pausemovetime = 0
scale = .1,.15
vel = -.5,0
sprpriority = 12
ownpal = 1

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 830

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 820

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 200

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
; Run 2:
;-------------------------------------------------------------------------------
[Statedef 820]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 820
poweradd = 100
sprpriority = 0

[State 0, Garrazo]
type = Explod
trigger1 = animelem = 2
anim = 3450
ID = 3450
pos = 50,-30
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = .7,.7
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,3
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,3
volume = 999

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 7
value = S1,21
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,23
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NA
guardflag = MA
animtype = Heavy
damage = 30
pausetime = 10,12
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,22
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -4
air.velocity = -2,-2
Fall = 0
Getpower = 0,0
envshake.time = 20
sprpriority = 0

[State 0, Helper]
type = Helper
Triggerall = p2movetype = H && p2stateno != [120,155]
triggerall = numhelper(8101) = 0
trigger1 = Movehit = 1
helpertype = normal
name = "HitSpark"
ID = 8101
stateno = 8101
pos = 60,-50
postype = p1
facing = 1
ownpal = 1
ignorehitpause = 1

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 200

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = ailevel > 0 && random < (ailevel * 100)*2
value = 300

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;;===============================================================================
; Run 3:
;-------------------------------------------------------------------------------
[Statedef 830]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 830
poweradd = 100
sprpriority = 0

[State 0, Pause]
type = Pause
triggerall = prevstateno != 60
trigger1 = time = [0,10]
time = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,6
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,6
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 7
value = S1,21
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,23
volume = 50

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,SA
guardflag = MA
animtype = Heavy
damage = 50
pausetime = 12,12
sparkno = -1
sparkxy = -20,-60
guard.sparkno = S7010
hitsound = S1,24
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -6,-8
air.velocity = -6,-8
Fall = 1
getpower = 0,0
envshake.time = 20

[State 0, Helper]
type = Helper
trigger1 = numhelper(8103) = 0 && movehit = 1
helpertype = normal
name = "HitSpark"
ID = 8103
stateno = 8103
pos = 70,-60;0, -25
postype = p1
facing = 1
ownpal = 1
supermove=9999
pausemove=9999
ignorehitpause=1

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = command != "holdup"
triggerall = command != "holdback"
triggerall = command != "holddown"
triggerall = command != "holdfwd"
triggerall =  time >= 20
trigger1 = ailevel = 0 && command = "x"
trigger1 = numhelper(40010) = 1
trigger2 = ailevel = 0 && command = "x"
trigger2 = numhelper(40020) = 1
trigger3 = ailevel = 0 && command = "x"
trigger3 = numhelper(40030) = 1
trigger4 = ailevel > 0 && random < (ailevel * 100)
trigger4 = numhelper(40010) = 1
trigger5 = ailevel > 0 && random < (ailevel * 100)
trigger5 = numhelper(40020) = 1
trigger6 = ailevel > 0 && random < (ailevel * 100)
trigger6 = numhelper(40030) = 1
value = 25000

[State 200, Combo + Combo IA]
type = ChangeState
triggerall = command != "holdup"
triggerall = command != "holdback"
triggerall = command != "holddown"
triggerall = command != "holdfwd"
triggerall =  time >= 20
triggerall = moveguarded
trigger1 = ailevel = 0 && command = "z"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 3380

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;===============================================================================

;===============================================================================
; TAUNT
;-------------------------------------------------------------------------------
; TAUNT - Start
[Statedef 500]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 500
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S5,33
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S5,33
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 5
value = S1,21
volume = 50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,27
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,27
volume = 999

[State 200, End]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;===============================================================================
; Power Charge:
;-------------------------------------------------------------------------------
; Power Charge - Start
[Statedef 540]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 540
sprpriority = 2

[State 0, EnvShake]
type = EnvShake
triggerall = Time >= 10
trigger1 = time%5 = 0
time = 5
ampl = 3

[State 0, PowerAdd]
type = PowerAdd
triggerall = Time >= 10
trigger1 = 1
value = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S2,16
volume = 999
channel = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S2,16
volume = 999
channel = 2

[State 0, Palfx]
type = Palfx
trigger1 = time = 10
time = 10
add = 150,150,150
mul = 240,230,190;256,256,256
sinadd = 100,100,100,22
ignorehitpause = 1

[State aura]
type = Explod
trigger1 = time = 10
Anim = 6021
ID = 6021
pos = 5,-15
sprpriority = 3
removeongethit = 1
removetime = -1
bindtime = -1
ownpal = 1
ontop = 1
scale = .6,.65
[State aura2]
type = Explod
trigger1 = time = 10
Anim = 6022
ID = 6022
pos = 65,-90
sprpriority = -4
removeongethit = 1
removetime = -1
bindtime = -1
ownpal = 1
ontop = 0
scale = .5,.65
[State aura3]
type = Explod
trigger1 = time = 10
Anim = 6023
ID = 6023
pos = 50,-100
sprpriority = 4
removeongethit = 1
removetime = -1
bindtime = -1
ownpal = 1
ontop = 1
scale = .5,.65
[State aura4]
type = Explod
trigger1 = time = 10
Anim = 6024
ID = 6024
pos = 60,-100
sprpriority = 5
removeongethit = 1
removetime = -1
bindtime = -1
ownpal = 1
ontop = 1
scale = .5,.65
[State aura5]
type = Explod
trigger1 = time = 10
Anim = 6025
ID = 6025
pos = 30,-50
sprpriority = -5
removeongethit = 1
removetime = -1
bindtime = -1
ownpal = 1
ontop = 1
scale = .35,.35

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S0,7
volume = 999
channel = 5
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S0,7
volume = 999
channel = 6

[State 200, End]
type = ChangeState
Triggerall = ailevel > 0
triggerall = time >= 25
trigger1 = time = 100+random%900
trigger2 = power = 3000
trigger3 = p2bodydist x <= 50
value = 541

[State 200, End]
type = ChangeState
Triggerall = ailevel = 0
triggerall = time >= 25
trigger1 = command != "hold_y"
trigger2 = power = 3000
value = 541
;-------------------------------------------------------------------------------
; Power Charge - Fin
[Statedef 541]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 541
sprpriority = 2

[State 0, Palfx]
type = Palfx
trigger1 = time = 0
time = 5
add = 150,150,150
mul = 240,230,190;256,256,256
sinadd = 100,100,100,22
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,15
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,15
volume = 999

[State aura5]
type = Explod
trigger1 = time = 0
Anim = 6025
ID = 6000
pos = 30,-50
sprpriority = -5
removeongethit = 1
removetime = -2
bindtime = -1
ownpal = 1
ontop = 0
scale = .35,.35

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 6021
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 6022
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 6023
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 6024
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 6025

[State 200, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;===============================================================================
; Helper anim:
;-------------------------------------------------------------------------------
; Helper anim - Start
[Statedef 550]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 500
poweradd = -500
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = Partner, name = "18"
value = S350,2
volume = 999
[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = Partner, name = "18"
value = S350,2
volume = 999

[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = Partner, name = "Freezer"
value = S350,3
volume = 999
[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = Partner, name = "Freezer"
value = S350,3
volume = 999

[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = Partner, name = "Goku"
value = S350,4
volume = 999
[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = Partner, name = "Goku"
value = S350,4
volume = 999

[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = Partner, name = "Krillin"
value = S350,5
volume = 999
[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = Partner, name = "Krillin"
value = S350,5
volume = 999

[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = Partner, name = "Broly"
value = S350,6
volume = 999
[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = Partner, name = "Broly"
value = S350,6
volume = 999

[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = Partner, name = "Gohan"
value = S350,7
volume = 999
[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = Partner, name = "Gohan"
value = S350,7
volume = 999

[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = Partner, name = "Piccolo"
value = S350,8
volume = 999
[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = Partner, name = "Piccolo"
value = S350,8
volume = 999

[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = Partner, name = "Vegeta"
value = S350,9
volume = 999
[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = Partner, name = "Vegeta"
value = S350,9
volume = 999

[State 0, PlaySnd]
type = PlaySnd
triggerall = !Partner, name = "18"
triggerall = !Partner, name = "Freezer"
triggerall = !Partner, name = "Goku"
triggerall = !Partner, name = "Krillin"
triggerall = !Partner, name = "Broly"
triggerall = !Partner, name = "Gohan"
triggerall = !Partner, name = "Piccolo"
triggerall = !Partner, name = "Vegeta"
trigger1 = time = 0
value = S350,1
volume = 999
[State 0, PlaySnd]
type = PlaySnd
triggerall = !Partner, name = "18"
triggerall = !Partner, name = "Freezer"
triggerall = !Partner, name = "Goku"
triggerall = !Partner, name = "Krillin"
triggerall = !Partner, name = "Broly"
triggerall = !Partner, name = "Gohan"
triggerall = !Partner, name = "Piccolo"
triggerall = !Partner, name = "Vegeta"
trigger1 = time = 0
value = S350,1
volume = 999

[State -1, Partner Assist]
type = VarSet
sysvar(4) = 10
triggerall = sysvar(4) = 1 || sysvar(4) = 15
triggerall = NumPartner
triggerall = RoundState = 2
triggerall = Partner, StateNo = [1251112,1251114]
triggerall = Partner, Time >= 65 && Time > 0
triggerall = teammode = Simul
triggerall = StateNo != [3000,1251199]
triggerall = hitdefattr != SCA, HA, HP, HT
triggerAll = StateNo != [130,152]
triggerall = !(StateNo = [5000,5500])
trigger1 = time > 0
ignorehitpause = 1

[State 200, End]
type = ChangeState
trigger1 = Time = 20
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Teleport FX
[Statedef 580]
type    = S
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 9999
sprpriority = 3

[State aura5]
type = Explod
trigger1 = time = 0
Anim = 580
ID = 580
pos = 0,0
sprpriority = 5
removeongethit = 1
removetime = -2
bindtime = -1
ownpal = 1
ontop = 1
scale = .6,.6
[State aura5]
type = Explod
trigger1 = time = 0
Anim = 581
ID = 580
pos = 0,0
sprpriority = 5
removeongethit = 1
removetime = -2
bindtime = -1
ownpal = 1
ontop = 1
scale = .6,.6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,14
volume = 999

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 200, End]
type = Destroyself
trigger1 = animtime = 0
;-------------------------------------------------------------------------------
; Teleport FX 2
[Statedef 581]
type    = S
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 580
sprpriority = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -45

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = Sub

[State 200, End]
type = Destroyself
trigger1 = animtime = 0
;-------------------------------------------------------------------------------
; Teleport FX 3
[Statedef 582]
type    = S
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 580
sprpriority = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = Sub

[State 200, End]
type = Destroyself
trigger1 = animtime = 0
;-------------------------------------------------------------------------------
; Camara Lenta
[Statedef 590]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 9999
sprpriority = 2

[State 0, Pause]
type = Pause
trigger1 = time = [0,10]
time = 1

[State 200, End]
type = Destroyself
trigger1 = time = 20
;-------------------------------------------------------------------------------
; Camara Lenta 2
[Statedef 591]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 9999
sprpriority = 2

[State 0, Pause]
type = Pause
trigger1 = time = [0,5]
time = 1

[State 200, End]
type = Destroyself
trigger1 = time = 10

;-------------------------------------------------------------------------------
;===============================================================================
